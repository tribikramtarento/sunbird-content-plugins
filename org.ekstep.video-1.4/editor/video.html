<script type="text/ng-template" ng-app="videoApp" ng-controller="videoCtrl as $ctrl" id="videoPreviewDialog">

    <style type="text/css">
        .video-modal {
            /* top: 4% !important; */
            display: flex !important;
            flex-direction: column;
        }
        .video-modal>.header, .video-modal>.menu, .video-modal>.fixedActionBar{
            flex-shrink: 0;
        }
        .video-modal>.content{
            overflow-y: auto;
            padding: 0.5rem 1.5rem 80px 1.5rem !important;
        }
        .ui.grid .column.video-leftContent {
            height: 200px;
            padding-top: 10px !important;
        }
        .librarySearchBar{
            padding: 0.5rem 1.5rem;
        }
        .ui.grid .column.video-rightContent {
            color: #aaa;
            font-size: 13px;
            font-style: italic;
            padding-top: 35px !important;
        }
        .messageBox{
            width: 100% !important;
            padding-top: 56.25% !important;
            position: relative;
        }
        .messageBox .text{
            position: absolute;
            top: 50%;
            left: 0;
            bottom: 0;
            right: 0;
        }
        .messageBox .icon {
            position: absolute;
            top: 40%;
            left: 0;
            bottom: 0;
            right: 0;
            margin: 0 auto;
        }
        #previewMessage,
        #errorMessage {
            /* height: 200px !important; */
            text-align: center;
            padding-top: 70px;
        }
        .video-library-tab{

        }
        #url-upload input {
           border-bottom: 1px solid #ddd !important;
        border-radius: 0;
        margin-right:5px;
    }
        .load-more-assets-spinner {
    margin: 100px auto 0;
    width: 70px;
    text-align: center;
  }

  .load-more-assets-spinner > div {
    width: 18px;
    height: 18px;
    background-color: #333;

    border-radius: 100%;
    display: inline-block;
    -webkit-animation: sk-bouncedelay 1.4s infinite ease-in-out both;
    animation: sk-bouncedelay 1.4s infinite ease-in-out both;
  }

  .load-more-assets-spinner .bounce1 {
    -webkit-animation-delay: -0.32s;
    animation-delay: -0.32s;
  }

  .load-more-assets-spinner .bounce2 {
    -webkit-animation-delay: -0.16s;
    animation-delay: -0.16s;
  }

  @-webkit-keyframes sk-bouncedelay {
    0%, 80%, 100% { -webkit-transform: scale(0) }
    40% { -webkit-transform: scale(1.0) }
  }

  @keyframes sk-bouncedelay {
    0%, 80%, 100% {
      -webkit-transform: scale(0);
      transform: scale(0);
    } 40% {
      -webkit-transform: scale(1.0);
      transform: scale(1.0);
    }
  }
  .load-more-assets-warning-msg img{
    padding:0px!important;
  }
  .load-more-assets-warning-msg p{
    text-align:center;
  }
  .fixedActionBar{
      position: fixed;
      bottom: 0;
      width: 100%;
  }
</style>
<div type="text/template" id="qq-template-validation" style="display: none">
    <div class="qq-uploader-selector qq-uploader custom-qq-uploader" style="min-height:250px;">

        <div class="qq-upload-drop-area-selector qq-upload-drop-area" qq-hide-dropzone>
            <span class="qq-upload-drop-area-text-selector"></span>
        </div>

        <span class="qq-drop-processing-selector qq-drop-processing">
            <span>Processing dropped files...</span>
            <span class="qq-drop-processing-spinner-selector qq-drop-processing-spinner"></span>
        </span>
        <ul class="qq-upload-list-selector qq-upload-list custom-qq-upload-list" aria-live="polite" aria-relevant="additions removals">
            <li>
                <div class="qq-progress-bar-container-selector">
                    <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-progress-bar-selector qq-progress-bar"></div>
                </div>
                <span class="qq-upload-spinner-selector qq-upload-spinner"></span>
                <img class="qq-thumbnail-selector" qq-max-size="100" qq-server-scale>
                <span class="qq-upload-file-selector qq-upload-file custom-qq-upload-file"></span>
                <span class="qq-upload-size-selector qq-upload-size"></span>
                <!--<button type="button" class="qq-btn qq-upload-cancel-selector qq-upload-cancel custom-qq-upload-cancel">Cancel</button>-->
                <button type="button" class="qq-btn qq-upload-retry-selector qq-upload-retry">Retry</button>
                <button type="button" class="qq-btn qq-upload-delete-selector qq-upload-delete">Delete</button>
                <span role="status" class="qq-upload-status-text-selector qq-upload-status-text"></span>
            </li>
        </ul>
        <div id="qq-upload-actions">
            <div style="position: absolute;bottom: 45%;left: 44.8%;text-align: center; color: #9b9b9b; user-select: none; cursor: default;">
                <i class="upload huge icon" style="font-size: 3em"></i><br>
                <strong>Draghed &amp; Drop</strong><br>
                <span>your files here, or</span>
            </div>
            <div class="qq-upload-button-selector qq-upload-button custom-qq-upload-button" style="bottom: 20%;">
                <div>Browse</div>
            </div>
        </div>
        <dialog class="qq-confirm-dialog-selector">
            <div class="qq-dialog-message-selector"></div>
            <div class="qq-dialog-buttons">
                <button type="button" class="qq-cancel-button-selector">No</button>
                <button type="button" class="qq-ok-button-selector">Yes</button>
            </div>
        </dialog>

        <dialog class="qq-prompt-dialog-selector">
            <div class="qq-dialog-message-selector"></div>
            <input type="text">
            <div class="qq-dialog-buttons">
                <button type="button" class="qq-cancel-button-selector">Cancel</button>
                <button type="button" class="qq-ok-button-selector">Ok</button>
            </div>
        </dialog>
    </div>
</div>
<div class="ui modal active fullScreeenModal video-modal">

    <div class="header" ng-switch="$ctrl.plugin">
        <div class="ui two column grid">
            <div class="row">
                <div class="column">
                    <span>
                        <i class="video play outline large icon"></i> Add Video</span>
                </div>
                <div class="right aligned column">
                    <i class="close link icon" ng-click="closeThisDialog(); $ctrl.generateTelemetry({type: 'click', subtype: 'close', target: 'closeButton'})"></i>
                </div>
            </div>
        </div>
    </div>
    <div class="ui pointing secondary menu">
            <a id="libraryTab" class="active item" data-tab="libraryTab" ng-click="$ctrl.libraryTab();">Library</a>
            <a id="videoResourcesTab" class="item" data-tab="videoResourcesTab" ng-click="$ctrl.videoResourcesTab();">Video Resources</a>
            <a id="uploadVideoTab" class="item" data-tab="uploadVideoTab" ng-click="$ctrl.uploadVideoTab();">Upload Video</a>
    </div>
    <div class="row menu librarySearchBar" ng-if="$ctrl.showSearchBar">
        <div class="column">
            <div class="ui  fluid icon input assetbrowser_searchBox">
                <input id="searchMyImageAssets" ng-model="$ctrl.query" placeholder="Search the library for YouTube videos published under 'CC-BY 4.0'..."
                    ng-keypress="$event.keyCode === 13 ? $ctrl.search() : null" type="text" />
                <i class="circular search link icon inverted" ng-click="$ctrl.search(); $ctrl.generateTelemetry({type: 'click', subtype: 'search', target: 'searchAsset'})"></i>
            </div>
        </div>
    </div>
    <div class="content">
        <div class="video__itemContainer">
            <!-- First tab -->
            <div class="ui fluid  container tab active" data-tab="libraryTab">
                <div class="clearfix">&nbsp;</div>
                <div class="ui special four cards video-library-tab" id="video-library-tab">
                    <div ng-show="$ctrl.youtubeList.length > 0" ng-click="$ctrl.VideoSource(videoItem)" class="card"
                        style="cursor:pointer" ng-repeat="videoItem in $ctrl.youtubeList  track by $index">
                        <div class="video image infopopover">
                            <img ng-src="{{videoItem.appIcon || $ctrl.defaultImage}}" class="resourceMetaImage ">
                            <div class="ui checkbox blue-checkbox checkBoxOverImage-top-right-corner" id='checkBox_{{videoItem.identifier}}'
                                style="z-index:12">
                                <input class="radioBox" type="radio" name="youtubeVideo">
                                <label></label>
                            </div>
                            <div class="ui inverted dimmer">
                                <div class="content">
                                    <div class="ui list cardDetails-list">
                                        <div class="item">
                                            <div class="right floated content contentMetaDetail">{{videoItem.board}}</div>
                                            <div class="content contentTitle">Board</div>
                                        </div>
                                        <div class="item">
                                            <div class="right floated content contentMetaDetail">{{(videoItem.gradeLevel.toString())}}
                                            </div>
                                            <div class="content contentTitle">Class</div>
                                        </div>
                                        <div class="item">
                                            <div class="right floated content contentMetaDetail">{{(videoItem.subject)}}
                                            </div>
                                            <div class="content contentTitle">Subject</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="content">
                            <div class="header contentMetaTitle">
                                {{videoItem.name}}
                            </div>
                            <div class="meta" ng-if="videoItem.creator">
                                <span class="date">Created by {{videoItem.creator}}</span>
                            </div>
                        </div>
                    </div>

                    <div class="twelve wide column" ng-show="$ctrl.youtubeList.length ==0">
                        <span>No result found. </span>
                    </div>
                    <div class="twelve wide column">
                        <div class="load-more-assets-spinner" ng-show="$ctrl.loadMoreAssetSpinner">
                            <div class="bounce1"></div>
                            <div class="bounce2"></div>
                            <div class="bounce3"></div>
                        </div>
                        <div class="load-more-assets-warning-msg" ng-show="$ctrl.showLoadMoreWarningMsg">
                            <img class="ui centered tiny image" ng-src="{{$ctrl.contentNotFoundImage}}">
                            <p>Didnâ€™t find what you were looking for? Try
                                <a href="#" ng-click="$ctrl.searchTextClicked();">search</a> for something more
                                specific
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Second Tab -->
            <div class="ui fluid  container tab" data-tab="videoResourcesTab">
                <h1> SECOND TAB </h1>
            </div>

            <!-- Third tab -->
            <div class="ui fluid grid container tab" data-tab="uploadVideoTab">
                <div class="row">
                    <div class="seven wide left aligned column">
                    <div class="field" id='url-upload'>
                        <label>URL</label>
                        <div class="ui fluid transparent input">
                            <input type="text" ng-keyup="$event.keyCode == 13 && $ctrl.videoUrl !== '' && $ctrl.previewVideo(); $ctrl.generateTelemetry({type: 'click', subtype: 'search', target: 'videoUrl'})"
                                placeholder="https://" ng-model="$ctrl.videoUrl" ng-change="$ctrl.hasInputChanged();">
                            <div class="ui primary basic button" ng-click="$ctrl.previewVideo(); $ctrl.generateTelemetry({type: 'click', subtype: 'search', target: 'videoUrl'})">Go</div>
                        </div>
                    </div>
                    <div style="margin-top: 15px"></div>
                        <div id="upload-content-div"  style="margin-top: 15px"></div>
                        <p>
                                <p><b>YouTube</b>:</p>
                                    <p>Only creative commons YouTube links are supported. </p>
                                <p><b>Google Drive</b>:</p>
                                    <p>Supported File Type: WebM, MP4. ,</br>
                                        Recommended File Size: Less than {{$ctrl.maxVideoSize}}MB</p>
                            </p>

                            <div class="grouped required fields">
                                    <label for="ccByContribution">Copyright &amp; License:</label>
                                    <p class="licenseMessage">I understand and confirm that all resources and assets created through the content editor or uploaded on the platform shall be available for free and public use without limitations on the platform (web portal, applications and any other end user interface that the platform would enable) and will be licensed under terms &amp; conditions and policy guidelines of the platform.</p>
                                    <div class="field">
                                        <div class="ui radio checkbox">
                                            <input id="ccByContribution1" name="ccByContribution" type="radio" ng-click="$ctrl.setVideoLicense(true)" value="Creative Commons Attribution (CC BY)" tabindex="0" class="hidden">
                                            <label for="ccByContribution1" ng-click="$ctrl.setVideoLicense(true); $ctrl.generateTelemetry({type: 'click', subtype: 'select', target: 'selectCCBYproperty'});">Yes, make it available to everyone</label>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <div class="ui radio checkbox">
                                            <input id="ccByContribution2" name="ccByContribution" type="radio" ng-click="$ctrl.setVideoLicense(false)" value="" tabindex="0" class="hidden">
                                            <label for="ccByContribution2" ng-click="$ctrl.setVideoLicense(false); $ctrl.generateTelemetry({type: 'click', subtype: 'select', target: 'unselectCCBYproperty'});">No, don't share with anyone</label>
                                        </div>
                                    </div>
                                </div>
                    </div>
                    <div class="five wide column" >
                            <div class="previewBox">
                                <div style="margin-top: 15px"></div>
                                <div ng-show="$ctrl.messageDiv">
                                    <div class="ui segment messageBox" class="ui" id="previewMessage" ng-if="$ctrl.show == 'message'">
                                        <div class="ui text">{{$ctrl.previewMessages.emptyState}}</div>
                                    </div>
                                    <div class="ui segment messageBox" id="errorMessage" ng-if="$ctrl.show == 'error'">
                                        <i class="warning sign large red icon"></i>
                                        <div class="ui text">{{ $ctrl.errorMessage || 'Sorry could not load preview of the
                                            video link. Please check the link and try again.'}}</div>
                                    </div>
                                    <div class="ui segment messageBox" ng-if="$ctrl.show == 'loader'">
                                        <div class="ui active inverted dimmer">
                                            <div class="ui text loader">{{$ctrl.previewMessages.loadingState}}</div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-show="!$ctrl.messageDiv" id="previewVideo"></div>
                            </div>
                            <div style="margin-top: 15px"></div>
                            <div id="hideShowFields" class="ui videoInfoBox form">
                                <div class="required field {{$ctrl.assetNameError}}">
                                    <label for="assetName" title="Enter Asset Name">Name</label>
                                    <input id="assetName" type="text" name="assetName" ng-model="$ctrl.assetMeta.name" placeholder="Enter asset name" data-validate="assetName">
                                    <div ng-if="$ctrl.assetNameError == 'error'" class="ui basic red pointing prompt label transition visible">Please enter asset name</div>
                                </div>
                                <div class="field">
                                    <label for="keywords" title="Keywords">Keywords</label>
                                    <input id="keywords" type="text" name="keywords" ng-model="$ctrl.keywordsText" data-validate="keywords">
                                </div>
                                <div class="field">
                                    <label for="language" title="Choose Language">Language</label>
                                    <select id="language" class="" ng-model="$ctrl.languageText" {{$ctrl.assetMeta.requiredField}} name="language" ng-options="lang for lang in $ctrl.assetMeta.language" data-validate="language" >
                                        <option value="">All</option>
                                    </select>
                                </div>
                                <div class="{{$ctrl.asset.requiredField}} field removeError">
                                    <label for="creator" title="Creator">Creator</label>
                                    <input id="creator" type="text" ng-model="$ctrl.assetMeta.creator" {{$ctrl.asset.requiredField}} name="creator" placeholder="Enter Name" data-validate="creator">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="actions fixedActionBar">
                <div class="ui buttons">
                    <!-- <button class="ui orange button" ng-click="closeThisDialog();$ctrl.generateTelemetry({type: 'click', subtype: 'close', target: 'cancelButton'})"
                            type="button">Cancel</button> -->
                    <!-- <div class="or"></div> -->
                    <button id="addToLesson" class="ui blue button" type="button" ng-disabled="!$ctrl.showAddLessonBtn"
                        ng-click="$ctrl.addVideo();$ctrl.generateTelemetry({type: 'click', subtype: 'addToLesson', target: 'addVideo'})">Add to slide</button>
                </div>
            </div>
    </div>

</div>
</script>
